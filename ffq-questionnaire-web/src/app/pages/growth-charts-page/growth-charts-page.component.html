<div class="qb-container">
  <mat-card class="qb-card">
    <mat-card-title> Growth Charts </mat-card-title>
    <mat-card-actions>
      <mat-accordion>
        <mat-expansion-panel hideToggle>
          <mat-expansion-panel-header>
            <mat-panel-title>Child Personal Information</mat-panel-title>
            <mat-panel-description
              >Name and gender of the child.
            </mat-panel-description>
          </mat-expansion-panel-header>
          <p>Please select the information asked.</p>
          <form
            class="example-form"
            #childPersonalInformationForm="ngForm"
            ngNativeValidate
            (ngSubmit)="onSubmitChildPersonalInformationForm()"
          >
            <mat-form-field class="example-full-width" appearance="fill">
              <mat-label>Children</mat-label>
              <mat-select
                name="children"
                #childrenControl="ngModel"
                disableRipple
                required
                [(ngModel)]="childName"
                (selectionChange)="onTypeChartChange(chartChoseOption)"
              >
                <mat-option
                  *ngFor="let child of currentParent.childrennames; index as i"
                  [value]="child"
                  >{{ child }}</mat-option
                >
              </mat-select>
            </mat-form-field>
            <mat-form-field class="example-full-width" appearance="fill">
              <mat-label>Gender</mat-label>
              <mat-select
                name="gender"
                #genderControl="ngModel"
                disableRipple
                required
                [(ngModel)]="childGender"
                (selectionChange)="onTypeChartChange(chartChoseOption)"
              >
                <mat-option value="male">Male</mat-option>
                <mat-option value="female">Female</mat-option>
              </mat-select>
            </mat-form-field>
          </form>
        </mat-expansion-panel>
        <mat-expansion-panel hideToggle>
          <mat-expansion-panel-header>
            <mat-panel-title>Child Body Measurements</mat-panel-title>
            <mat-panel-description
              >Weight and height of the child.
            </mat-panel-description>
          </mat-expansion-panel-header>
          <p>Please provide all the information asked.</p>
          <form
            class="example-form"
            #childBodyMeasurementsForm="ngForm"
            ngNativeValidate
            (ngSubmit)="onSubmitChildBodyMeasurementsForm()"
          >
            <mat-form-field class="example-full-width" appearance="fill">
              <mat-label>Child age in Months (mos)</mat-label>
              <input
                name="age"
                #ageControl="ngModel"
                [(ngModel)]="childAge"
                required
                matInput
                type="number"
                placeholder="Ex. 2"
                [min]="MIN_AGE_MONTHS"
                [max]="MAX_AGE_MONTHS"
              />
              <ng-container *ngIf="ageControl.invalid && ageControl.touched">
                <mat-label *ngIf="ageControl.errors.required">
                  You must enter an age in month.</mat-label
                >
              </ng-container>
            </mat-form-field>
            <mat-form-field class="example-full-width" appearance="fill">
              <mat-label>Height in centimeters (cm)</mat-label>
              <input
                name="height"
                #heightControl="ngModel"
                [(ngModel)]="childHeight"
                required
                matInput
                type="number"
                step="0.5"
                placeholder="Ex. 60.5"
                [min]="MIN_HEIGHT_CENTIMETERS"
                [max]="MAX_HEIGHT_CENTIMETERS"
              />
              <ng-container
                *ngIf="heightControl.invalid && heightControl.touched"
              >
                <mat-label *ngIf="heightControl.errors.required">
                  You must enter a height in centimeters.</mat-label
                >
              </ng-container>
            </mat-form-field>
            <mat-form-field class="example-full-width" appearance="fill">
              <mat-label>Weight in kilograms (Kg)</mat-label>
              <input
                name="weight"
                #weightControl="ngModel"
                [(ngModel)]="childWeight"
                required
                matInput
                type="number"
                step="0.5"
                placeholder="Ex. 20"
                [min]="MIN_WEIGHT_KILOGRAMS"
                [max]="MAX_WEIGHT_KILOGRAMS"
              />
              <ng-container
                *ngIf="weightControl.invalid && weightControl.touched"
              >
                <mat-label *ngIf="weightControl.errors.required">
                  You must enter a height in centimeters.</mat-label
                >
              </ng-container>
            </mat-form-field>
            <button
              mat-button
              name="name"
              [disabled]="childBodyMeasurementsForm.invalid"
              (click)="onAddingData()"
            >
              Add
            </button>
            <button
              mat-button
              name="save"
              [disabled]="childBodyMeasurementsForm.invalid"
            >
              Save
            </button>
          </form>
        </mat-expansion-panel>
        <mat-expansion-panel hideToggle>
          <mat-expansion-panel-header>
            <mat-panel-title>Chart options</mat-panel-title>
            <mat-panel-description
              >BMI, Height - Age, Weight - Age, and Weight - Height
              charts.</mat-panel-description
            >
          </mat-expansion-panel-header>
          <p>Please select a chart option.</p>
          <form>
            <mat-button-toggle-group
              #chartOptionsGroup="matButtonToggleGroup"
              name="chartOptionsControl"
              [(ngModel)]="chartChoseOption"
              (change)="onTypeChartChange($event.value)"
            >
              <mat-button-toggle value="BMI">BMI</mat-button-toggle>
              <mat-button-toggle value="Height-Age"
                >Height-Age</mat-button-toggle
              >
              <mat-button-toggle value="Weight-Age"
                >Weight-Age
              </mat-button-toggle>
              <mat-button-toggle value="Weight-Height"
                >Weight-Height
              </mat-button-toggle>
            </mat-button-toggle-group>
          </form>
        </mat-expansion-panel>
      </mat-accordion>
    </mat-card-actions>
  </mat-card>
</div>

<div class="charts-line-chart">
  <ngx-charts-line-chart
    *ngIf="!childPersonalInformationForm.invalid && chartChoseOption !== 'none'"
    class="ngx-charts"
    [view]="view"
    [scheme]="colorScheme"
    [legendPosition]="position"
    [legend]="legend"
    [showXAxisLabel]="showXAxisLabel"
    [showYAxisLabel]="showYAxisLabel"
    [xAxis]="xAxis"
    [yAxis]="yAxis"
    [xAxisLabel]="xAxisLabel"
    [yAxisLabel]="yAxisLabel"
    [timeline]="timeline"
    [results]="results"
    [autoScale]="true"
    (select)="onSelect($event)"
    (activate)="onActivate($event)"
    (deactivate)="onDeactivate($event)"
  >
  </ngx-charts-line-chart>
</div>
